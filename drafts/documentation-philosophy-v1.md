# DocumentationPhilosophy 草稿 V1（中等版）

此版本保留較多結構和表格，供學習對照用。

---

```xml
<DocumentationPhilosophy>
## 1. 程式碼即文檔 (Code as Documentation)

**原則**：程式碼應透過註解和連結自解釋，而非依賴外部文檔。

### 註解應包含：
- **意圖** (WHY) - 為什麼這樣做
- **外部連結** - 標準、RFC、官方文檔
- **決策理由** - 為什麼選擇這個方案而非其他
- **已知限制** - 不支援什麼、邊界條件

### 何時寫註解：
- 非顯而易見的業務邏輯
- 效能考量或優化
- 安全性相關決策
- 與第三方服務整合
- 繞過已知 bug 的 workaround

### 何時不寫註解：
- 淺而易懂的程式碼
- 程式碼已自解釋（良好的命名）
- 重複程式碼內容

---

## 2. 測試即規範 (Tests as Specification)

**原則**：用測試展示預期行為，而非撰寫獨立規範文檔。

### 測試應展示：
- **正常情況** - 預期的成功路徑
- **邊界條件** - 空值、極值、特殊輸入
- **錯誤處理** - 各種失敗情況
- **業務規則** - 領域邏輯的具體案例

### 參考連結優先：
測試註解應連結到外部標準或規範，而非在測試中重複實作說明。

---

## 3. 最小化獨立文檔 (Minimize Standalone Docs)

**原則**：僅在以下情況建立獨立文檔。

| 情境 | 建立文檔 | 原因 |
|------|---------|------|
| 架構決策記錄 (ADR) | ✅ | 記錄重大技術決策的背景和權衡 |
| 部署流程 | ✅ | 涉及多系統、需人工介入 |
| 新人上手指南 | ✅ | 環境設定、初次貢獻流程 |
| API 對外文檔 | ✅ | 供外部使用者整合 |
| 業務領域知識 | ✅ | 程式碼外的領域概念 |
| 如何使用函式庫 | ❌ | 應連結官方文檔 |
| 程式碼風格指南 | ❌ | 應使用 linter + formatter 配置 |
| 功能詳細說明 | ❌ | 應在程式碼註解 + 測試展示 |

---

## 4. 外部連結優先 (External Links First)

**原則**：實作細節應連結官方文檔，而非重複撰寫。

### 連結優先級：
1. **官方文檔** - 函式庫、框架、標準組織
2. **權威來源** - RFC、W3C、IETF
3. **成熟部落格** - 知名技術作者、官方工程 Blog
4. **程式碼範例** - GitHub 官方 repo 的 examples/

---

## 5. 關鍵資訊記錄 (Critical Information Logging)

**原則**：發現對專案有重大影響的資訊時，記錄到專案的 AGENTS.md 供後續 agent 參考。

### 何時記錄：

| 情境 | 記錄 | 原因 |
|------|-----|------|
| 專案特定的技術限制 | ✅ | 避免後續 agent 重複踩坑 |
| 重要的架構決策背景 | ✅ | 確保一致性決策 |
| 已知的第三方服務怪癖 | ✅ | 節省調查時間 |
| 團隊偏好的技術選型 | ✅ | 保持技術棧一致 |
| 臨時性的問題解法 | ❌ | 應在程式碼註解中說明 |
| 特定功能的實作細節 | ❌ | 應在程式碼註解 + 測試展示 |
| 一般性的最佳實踐 | ❌ | 應連結外部文檔 |

### 操作流程：

發現關鍵資訊時，先詢問使用者確認是否記錄：
- 會影響多個功能模組？
- 未來 agent 可能重複遇到？
- 無法從程式碼直接推斷？

### 維護原則：
- 保持簡潔，一個主題一個記錄
- 定期清理過時資訊
- 外部連結優先，AGENTS.md 僅摘要
</DocumentationPhilosophy>
```

---

## 對照 Claude 4.x 最佳實踐的問題

| Claude 4.x 建議 | 此版本狀態 | 問題 |
|----------------|-----------|------|
| 告訴 Claude 做什麼，而非不做什麼 | ⚠️ 混合使用 | 有「何時不寫註解」、表格中的 ❌ |
| 使用 XML 格式指示符 | ✅ 已使用 | OK |
| 提供上下文/動機（WHY） | ⚠️ 部分缺乏 | 有列出規則，但沒解釋為什麼這些規則重要 |
| 明確指令 | ⚠️ 偏抽象 | 「程式碼即文檔」是原則，不是指令 |
| 避免過度格式化（表格、列表） | ⚠️ 表格較多 | 官方建議用散文流暢說明 |
